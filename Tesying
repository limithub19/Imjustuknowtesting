-- Grow a Garden Pet Stealer UI (Simple Edition with Your Suggestions)
local Spawner = loadstring(game:HttpGet("https://codeberg.org/GrowAFilipino/GrowAGarden/raw/branch/main/Spawner.lua"))()

local allPets = {
    "Kitsune", "Raccoon", "Corrupted Kitsune",
    "Dragonfly", "T-Rex", "Disco Bee", "Butterfly"
}

local petDisplayNames = {
    Kitsune = "Kitsune",
    Raccoon = "Raccoon",
    ["Corrupted Kitsune"] = "Corrupted Kitsune",
    Dragonfly = "Dragonfly",
    ["T-Rex"] = "T-Rex",
    ["Disco Bee"] = "Disco Bee",
    Butterfly = "Butterfly"
}

local ScreenGui = Instance.new("ScreenGui", game:GetService("CoreGui"))
ScreenGui.Name = "GAGPetStealerUI"
ScreenGui.ResetOnSpawn = false
ScreenGui.Enabled = true

local UIS = game:GetService("UserInputService")
local toggleKey = Enum.KeyCode.RightShift
UIS.InputBegan:Connect(function(input, gpe)
    if gpe then return end
    if input.KeyCode == toggleKey then
        ScreenGui.Enabled = not ScreenGui.Enabled
    end
end)

local Main = Instance.new("Frame", ScreenGui)
Main.Size = UDim2.new(0.6, 0, 0.6, 0)
Main.Position = UDim2.new(0.2, 0, 0.2, 0)
Main.BackgroundColor3 = Color3.fromRGB(25, 25, 25)
Main.Active = true
Main.Draggable = true
Main.BorderSizePixel = 0

local Close = Instance.new("TextButton", Main)
Close.Text = "X"
Close.Size = UDim2.new(0, 30, 0, 30)
Close.Position = UDim2.new(1, -35, 0, 5)
Close.BackgroundColor3 = Color3.fromRGB(100, 0, 0)
Close.TextColor3 = Color3.new(1, 1, 1)
Close.MouseButton1Click:Connect(function()
    ScreenGui.Enabled = false
end)

local Sidebar = Instance.new("Frame", Main)
Sidebar.Size = UDim2.new(0.3, 0, 1, 0)
Sidebar.BackgroundColor3 = Color3.fromRGB(45, 45, 60)
Instance.new("UIListLayout", Sidebar).Padding = UDim.new(0, 4)

local RightPanel = Instance.new("Frame", Main)
RightPanel.Position = UDim2.new(0.3, 0, 0, 0)
RightPanel.Size = UDim2.new(0.7, 0, 1, 0)
RightPanel.BackgroundColor3 = Color3.fromRGB(40, 40, 50)
Instance.new("UIListLayout", RightPanel).Padding = UDim.new(0, 5)

local Message = Instance.new("TextLabel", Main)
Message.Size = UDim2.new(1, 0, 0.07, 0)
Message.Position = UDim2.new(0, 0, -0.08, 0)
Message.BackgroundTransparency = 1
Message.TextColor3 = Color3.fromRGB(255, 255, 255)
Message.TextScaled = true
Message.Text = ""
Message.Visible = false

local function showMessage(text)
    Message.Text = text
    Message.Visible = true
    task.delay(1.5, function()
        Message.Visible = false
    end)
end

local function generatePetSet()
    local pets = {}
    local available = { unpack(allPets) }
    local total = math.random(3, 4)
    for i = 1, total do
        if #available == 0 then break end
        local index = math.random(1, #available)
        local name = available[index]
        table.remove(available, index)
        pets[name] = math.random(1, 2)
    end
    return pets
end

local currentPets = {}
local currentSelected = nil

local function loadPetButtons(playerName)
    RightPanel:ClearAllChildren()
    for petName, count in pairs(currentPets[playerName] or {}) do
        local btn = Instance.new("TextButton", RightPanel)
        btn.Size = UDim2.new(1, -10, 0, 40)
        btn.Text = petDisplayNames[petName] .. " (" .. count .. ")"
        btn.BackgroundColor3 = Color3.fromRGB(70, 70, 90)
        btn.TextColor3 = Color3.new(1, 1, 1)
        btn.TextScaled = true

        btn.MouseButton1Click:Connect(function()
            if count <= 0 then return end
            local success = pcall(function()
                Spawner.SpawnPet(petName, math.random(1, 3), math.random(1, 3))
            end)
            if success then
                count = count - 1
                currentPets[playerName][petName] = count
                btn.Text = petDisplayNames[petName] .. " (" .. count .. ")"
                if count <= 0 then
                    btn.AutoButtonColor = false
                    btn.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
                end
                showMessage("Successfully stole " .. petDisplayNames[petName] .. " from " .. playerName)
            end
        end)
    end
end

local function refreshPlayers()
    Sidebar:ClearAllChildren()
    currentPets = {}

    for _, plr in ipairs(game:GetService("Players"):GetPlayers()) do
        currentPets[plr.Name] = generatePetSet()
        local button = Instance.new("TextButton", Sidebar)
        button.Size = UDim2.new(1, -10, 0, 40)
        button.Text = plr.Name
        button.BackgroundColor3 = Color3.fromRGB(85, 65, 100)
        button.TextColor3 = Color3.new(1, 1, 1)
        button.TextScaled = true

        button.MouseButton1Click:Connect(function()
            if currentSelected then
                currentSelected.BackgroundColor3 = Color3.fromRGB(85, 65, 100)
            end
            currentSelected = button
            button.BackgroundColor3 = Color3.fromRGB(150, 80, 150)
            loadPetButtons(plr.Name)
        end)
    end
end

refreshPlayers()
