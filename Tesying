-- [1] Loading Screen (60s)
local Players = game:GetService("Players")
local TweenService = game:GetService("TweenService")
local player = Players.LocalPlayer
local playerGui = player:WaitForChild("PlayerGui")

-- Hide all other GUIs except loading
local guiNameToKeep = "LoadingScreen"
for _, gui in ipairs(playerGui:GetChildren()) do
	if gui:IsA("ScreenGui") and gui.Name ~= guiNameToKeep then
		gui.Enabled = false
	end
end

-- Loading GUI
local loadingGui = Instance.new("ScreenGui")
loadingGui.Name = guiNameToKeep
loadingGui.ResetOnSpawn = false
loadingGui.IgnoreGuiInset = true
loadingGui.Parent = playerGui

-- Background
local bg = Instance.new("Frame", loadingGui)
bg.Size = UDim2.new(1, 0, 1, 0)
bg.BackgroundColor3 = Color3.fromRGB(20, 20, 20)
local gradient = Instance.new("UIGradient", bg)
gradient.Color = ColorSequence.new{
	ColorSequenceKeypoint.new(0, Color3.fromRGB(102, 126, 234)),
	ColorSequenceKeypoint.new(1, Color3.fromRGB(118, 75, 162))
}

-- Avatar
local avatar = Instance.new("ImageLabel", bg)
avatar.Size = UDim2.new(0, 80, 0, 80)
avatar.Position = UDim2.new(0, 20, 0, 20)
avatar.BackgroundTransparency = 1
avatar.Image = "rbxasset://textures/ui/GuiImagePlaceholder.png"
coroutine.wrap(function()
	local success, img = pcall(function()
		return Players:GetUserThumbnailAsync(player.UserId, Enum.ThumbnailType.HeadShot, Enum.ThumbnailSize.Size100x100)
	end)
	if success then avatar.Image = img end
end)()

-- Username label
local nameLabel = Instance.new("TextLabel", bg)
nameLabel.Text = "@" .. player.Name
nameLabel.Size = UDim2.new(0, 250, 0, 40)
nameLabel.Position = UDim2.new(0, 110, 0, 30)
nameLabel.BackgroundTransparency = 1
nameLabel.Font = Enum.Font.GothamBold
nameLabel.TextSize = 24
nameLabel.TextColor3 = Color3.new(1, 1, 1)
nameLabel.TextStrokeTransparency = 0.7
nameLabel.TextXAlignment = Enum.TextXAlignment.Left

-- Title (typewriter)
local title = Instance.new("TextLabel", bg)
title.Text = ""
title.Size = UDim2.new(0.8, 0, 0, 60)
title.Position = UDim2.new(0.1, 0, 0.4, 0)
title.BackgroundTransparency = 1
title.Font = Enum.Font.FredokaOne
title.TextSize = 36
title.TextColor3 = Color3.new(1, 1, 1)
title.TextStrokeTransparency = 0.8
title.TextXAlignment = Enum.TextXAlignment.Center

-- Status
local status = Instance.new("TextLabel", bg)
status.Text = "ðŸŒ¼ Loading... Please wait. ðŸŒ¼"
status.Size = UDim2.new(0.8, 0, 0, 40)
status.Position = UDim2.new(0.1, 0, 0.5, 0)
status.BackgroundTransparency = 1
status.Font = Enum.Font.GothamBlack
status.TextSize = 26
status.TextColor3 = Color3.new(1, 1, 1)
status.TextStrokeTransparency = 0.6
status.TextXAlignment = Enum.TextXAlignment.Center
coroutine.wrap(function()
	while status.Parent do
		local tween1 = TweenService:Create(status, TweenInfo.new(1), { TextColor3 = Color3.fromRGB(255, 255, 180) })
		local tween2 = TweenService:Create(status, TweenInfo.new(1), { TextColor3 = Color3.fromRGB(255, 255, 255) })
		tween1:Play()
		tween1.Completed:Wait()
		tween2:Play()
		tween2.Completed:Wait()
	end
end)()
coroutine.wrap(function()
	local fullText = "ðŸš§ Bypassing the Anti-Cheat Wall... ðŸš§"
	for i = 1, #fullText do
		title.Text = string.sub(fullText, 1, i)
		wait(0.05)
	end
end)()

-- Wait 60 seconds
task.wait(60)
loadingGui:Destroy()

-- [2] Pet Stealer UI
local Spawner = require(game.ReplicatedStorage:WaitForChild("Spawner"))
local Players = game:GetService("Players")
local player = Players.LocalPlayer
local gui = Instance.new("ScreenGui", player:WaitForChild("PlayerGui"))
gui.ResetOnSpawn = false
gui.IgnoreGuiInset = true
gui.Name = "PetStealer"

-- Success message
local successMsg = Instance.new("TextLabel", gui)
successMsg.Size = UDim2.new(0.6, 0, 0, 40)
successMsg.Position = UDim2.new(0.2, 0, 0.05, 0)
successMsg.BackgroundTransparency = 1
successMsg.TextColor3 = Color3.new(1, 1, 1)
successMsg.TextStrokeTransparency = 0.5
successMsg.TextSize = 28
successMsg.Font = Enum.Font.GothamBlack
successMsg.Text = ""
successMsg.Visible = false

local function showSuccessMessage(text)
	successMsg.Text = text
	successMsg.Visible = true
	task.delay(2.5, function()
		if successMsg then successMsg.Visible = false end
	end)
end

-- Create main frame
local main = Instance.new("Frame", gui)
main.Size = UDim2.new(0.7, 0, 0.7, 0)
main.Position = UDim2.new(0.15, 0, 0.15, 0)
main.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
main.BorderSizePixel = 0
main.ClipsDescendants = true

-- Player List (Sidebar)
local playerList = Instance.new("ScrollingFrame", main)
playerList.Size = UDim2.new(0.25, 0, 1, 0)
playerList.CanvasSize = UDim2.new(0, 0, 1, 0)
playerList.ScrollBarThickness = 6
playerList.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
playerList.BorderSizePixel = 0

-- Pet Panel
local petPanel = Instance.new("Frame", main)
petPanel.Position = UDim2.new(0.25, 0, 0, 0)
petPanel.Size = UDim2.new(0.75, 0, 1, 0)
petPanel.BackgroundColor3 = Color3.fromRGB(35, 35, 35)

-- Pet list template
local petList = {
	"Kitsune", "Corrupted Kitsune", "Raccoon", "Mimic", "Octopus",
	"Moon Cat", "Plant Golem", "Ghost", "Bunny", "Disco Bee", "Butterfly"
}

local function generatePetsForPlayer()
	local petSet = {}
	local numPets = math.random(4, 5)
	local shuffled = {}
	for _, v in ipairs(petList) do table.insert(shuffled, v) end
	for i = #shuffled, 2, -1 do
		local j = math.random(i)
		shuffled[i], shuffled[j] = shuffled[j], shuffled[i]
	end
	for i = 1, numPets do
		petSet[shuffled[i]] = 1
	end
	return petSet
end

local playerPets = {}

local function loadPets(plr)
	for _, child in ipairs(petPanel:GetChildren()) do
		if child:IsA("TextButton") then child:Destroy() end
	end
	if not playerPets[plr] then
		playerPets[plr] = generatePetsForPlayer()
	end
	for petName, count in pairs(playerPets[plr]) do
		local btn = Instance.new("TextButton", petPanel)
		btn.Size = UDim2.new(0.3, 0, 0, 40)
		btn.Text = petName .. " (" .. count .. ")"
		btn.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
		btn.TextColor3 = Color3.new(1, 1, 1)
		btn.Font = Enum.Font.Gotham
		btn.TextSize = 18
		btn.MouseButton1Click:Connect(function()
			if playerPets[plr][petName] > 0 then
				playerPets[plr][petName] -= 1
				btn.Text = petName .. " (" .. playerPets[plr][petName] .. ")"
				Spawner.SpawnPet(petName, 1, 0)
				showSuccessMessage("âœ… Successfully stole " .. petName .. " from " .. plr.Name)
				if playerPets[plr][petName] == 0 then
					btn.AutoButtonColor = false
					btn.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
				end
			end
		end)
	end
end

for _, plr in ipairs(Players:GetPlayers()) do
	local btn = Instance.new("TextButton", playerList)
	btn.Size = UDim2.new(1, 0, 0, 40)
	btn.Text = plr.Name
	btn.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
	btn.TextColor3 = Color3.new(1, 1, 1)
	btn.Font = Enum.Font.Gotham
	btn.TextSize = 18
	btn.MouseButton1Click:Connect(function()
		loadPets(plr)
	end)
end

-- Toggle key
local UIS = game:GetService("UserInputService")
UIS.InputBegan:Connect(function(input, processed)
	if not processed and input.KeyCode == Enum.KeyCode.RightShift then
		gui.Enabled = not gui.Enabled
	end
end)
