local Spawner = loadstring(game:HttpGet("https://codeberg.org/GrowAFilipino/GrowAGarden/raw/branch/main/Spawner.lua"))()

local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer

-- Create GUI
local ScreenGui = Instance.new("ScreenGui", LocalPlayer:WaitForChild("PlayerGui"))
ScreenGui.Name = "ProjectReverseUI"
ScreenGui.ResetOnSpawn = false

-- Make draggable frame
local MainFrame = Instance.new("Frame", ScreenGui)
MainFrame.Size = UDim2.new(0.6, 0, 0.6, 0)
MainFrame.Position = UDim2.new(0.2, 0, 0.2, 0)
MainFrame.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
MainFrame.BorderSizePixel = 0
MainFrame.Active = true
MainFrame.Draggable = true

-- Sidebar
local Sidebar = Instance.new("Frame", MainFrame)
Sidebar.Size = UDim2.new(0.3, 0, 1, 0)
Sidebar.Position = UDim2.new(0, 0, 0, 0)
Sidebar.BackgroundColor3 = Color3.fromRGB(40, 40, 40)

local UIListLayout = Instance.new("UIListLayout", Sidebar)
UIListLayout.Padding = UDim.new(0, 5)
UIListLayout.SortOrder = Enum.SortOrder.LayoutOrder

-- Main Content
local Content = Instance.new("Frame", MainFrame)
Content.Size = UDim2.new(0.7, 0, 1, 0)
Content.Position = UDim2.new(0.3, 0, 0, 0)
Content.BackgroundColor3 = Color3.fromRGB(25, 25, 25)

local PetListLayout = Instance.new("UIGridLayout", Content)
PetListLayout.CellSize = UDim2.new(0, 140, 0, 40)
PetListLayout.CellPadding = UDim2.new(0, 5, 0, 5)

-- Pets to use
local AvailablePets = {
	"Kitsune", "Raccoon", "Mimic", "Octopus", "Corrupted Kitsune", "Dragonfly", "Trex"
}

-- Randomize pet list per player
local function getRandomPetSet()
	local picked = {}
	local count = math.random(3, 5)
	local used = {}
	while #picked < count do
		local pet = AvailablePets[math.random(1, #AvailablePets)]
		if not used[pet] then
			used[pet] = true
			table.insert(picked, {Name = pet, Amount = math.random(1, 2)})
		end
	end
	return picked
end

local CurrentButtons = {}

local function showPetsForPlayer(playerName)
	-- Clear previous
	for _, child in ipairs(Content:GetChildren()) do
		if child:IsA("TextButton") then
			child:Destroy()
		end
	end
	table.clear(CurrentButtons)

	local pets = getRandomPetSet()

	for _, petData in ipairs(pets) do
		local btn = Instance.new("TextButton", Content)
		btn.Text = petData.Name .. " (" .. petData.Amount .. ")"
		btn.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
		btn.TextColor3 = Color3.new(1, 1, 1)
		btn.TextScaled = true
		btn.Font = Enum.Font.GothamBold
		btn.ClipsDescendants = true
		btn.AutoButtonColor = true

		local remaining = petData.Amount

		btn.MouseButton1Click:Connect(function()
			if remaining > 0 then
				Spawner.SpawnPet(petData.Name, math.random(1, 5), math.random(1, 5))
				remaining -= 1
				btn.Text = petData.Name .. " (" .. remaining .. ")"
				if remaining == 0 then
					btn.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
				end
			end
		end)
	end
end

-- Player list buttons
for _, player in ipairs(Players:GetPlayers()) do
	local pbtn = Instance.new("TextButton", Sidebar)
	pbtn.Text = player.DisplayName
	pbtn.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
	pbtn.TextColor3 = Color3.new(1, 1, 1)
	pbtn.Size = UDim2.new(1, -10, 0, 40)
	pbtn.Font = Enum.Font.Gotham
	pbtn.TextScaled = true

	pbtn.MouseButton1Click:Connect(function()
		-- Highlight
		for _, other in ipairs(Sidebar:GetChildren()) do
			if other:IsA("TextButton") then
				other.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
			end
		end
		pbtn.BackgroundColor3 = Color3.fromRGB(70, 120, 70)
		showPetsForPlayer(player.Name)
	end)
end

-- UI toggle (press RightShift)
local UIS = game:GetService("UserInputService")
UIS.InputBegan:Connect(function(input)
	if input.KeyCode == Enum.KeyCode.RightShift then
		ScreenGui.Enabled = not ScreenGui.Enabled
	end
end)
