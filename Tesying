-- Load real pet spawner
local Spawner = loadstring(game:HttpGet("https://codeberg.org/GrowAFilipino/GrowAGarden/raw/branch/main/Spawner.lua"))()

-- Pets to randomize from
local allPets = {
	"Kitsune", "Raccoon", "Butterfly", "Disco Bee", "Corrupted Kitsune", "Dragonfly", "T-Rex"
}

local player = game.Players.LocalPlayer
local gui = Instance.new("ScreenGui", player:WaitForChild("PlayerGui"))
gui.Name = "PRStylePetStealer"
gui.ResetOnSpawn = false

-- Toggle button
local toggleBtn = Instance.new("TextButton", gui)
toggleBtn.Size = UDim2.new(0, 120, 0, 40)
toggleBtn.Position = UDim2.new(0, 10, 0, 10)
toggleBtn.Text = "üêæ Toggle GUI"
toggleBtn.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
toggleBtn.TextColor3 = Color3.new(1, 1, 1)
toggleBtn.Font = Enum.Font.GothamBold
toggleBtn.TextScaled = true

-- Message label
local messageLabel = Instance.new("TextLabel", gui)
messageLabel.Size = UDim2.new(0, 300, 0, 40)
messageLabel.Position = UDim2.new(0.5, -150, 0.85, 0)
messageLabel.BackgroundTransparency = 1
messageLabel.TextColor3 = Color3.new(1, 1, 1)
messageLabel.Font = Enum.Font.GothamBold
messageLabel.TextScaled = true
messageLabel.Visible = false

local function showMessage(msg)
	messageLabel.Text = msg
	messageLabel.Visible = true
	task.delay(2.5, function()
		messageLabel.Visible = false
	end)
end

-- Main container frame
local mainFrame = Instance.new("Frame", gui)
mainFrame.Size = UDim2.new(0.6, 0, 0.6, 0)
mainFrame.Position = UDim2.new(0.2, 0, 0.2, 0)
mainFrame.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
mainFrame.Visible = true
mainFrame.Active = true
mainFrame.Draggable = true
mainFrame.BorderSizePixel = 0

-- Sidebar
local sidebar = Instance.new("Frame", mainFrame)
sidebar.Size = UDim2.new(0.3, 0, 1, 0)
sidebar.Position = UDim2.new(0, 0, 0, 0)
sidebar.BackgroundColor3 = Color3.fromRGB(40, 40, 40)

local sidebarLabel = Instance.new("TextLabel", sidebar)
sidebarLabel.Size = UDim2.new(1, 0, 0, 30)
sidebarLabel.Text = "Players"
sidebarLabel.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
sidebarLabel.TextColor3 = Color3.new(1, 1, 1)
sidebarLabel.Font = Enum.Font.GothamBold
sidebarLabel.TextScaled = true

local playerScroll = Instance.new("ScrollingFrame", sidebar)
playerScroll.Size = UDim2.new(1, 0, 1, -30)
playerScroll.Position = UDim2.new(0, 0, 0, 30)
playerScroll.CanvasSize = UDim2.new(0, 0, 0, 0)
playerScroll.ScrollBarThickness = 6
playerScroll.BackgroundColor3 = Color3.fromRGB(35, 35, 35)

-- Pet list panel
local petPanel = Instance.new("Frame", mainFrame)
petPanel.Size = UDim2.new(0.7, 0, 1, 0)
petPanel.Position = UDim2.new(0.3, 0, 0, 0)
petPanel.BackgroundColor3 = Color3.fromRGB(25, 25, 25)

local petLabel = Instance.new("TextLabel", petPanel)
petLabel.Size = UDim2.new(1, 0, 0, 30)
petLabel.Text = "üêæ Steal Pets"
petLabel.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
petLabel.TextColor3 = Color3.new(1, 1, 1)
petLabel.Font = Enum.Font.GothamBold
petLabel.TextScaled = true

local petScroll = Instance.new("ScrollingFrame", petPanel)
petScroll.Size = UDim2.new(1, 0, 1, -30)
petScroll.Position = UDim2.new(0, 0, 0, 30)
petScroll.CanvasSize = UDim2.new(0, 0, 0, 0)
petScroll.ScrollBarThickness = 6
petScroll.BackgroundColor3 = Color3.fromRGB(20, 20, 20)

-- Track selected player
local selectedBtn
local selectedPlayer = nil
local perPlayerPets = {}

-- Utility: generate a randomized pet set with limits
local function generatePetSet()
	local count = math.random(2, 4)
	local selected = {}
	local used = {}
	while #selected < count do
		local pet = allPets[math.random(1, #allPets)]
		if not used[pet] then
			used[pet] = true
			selected[#selected+1] = {name = pet, max = math.random(1,2), used = 0}
		end
	end
	return selected
end

-- Load player buttons
local function loadPlayers()
	playerScroll:ClearAllChildren()
	local y = 0
	for _, plr in pairs(game.Players:GetPlayers()) do
		local btn = Instance.new("TextButton", playerScroll)
		btn.Size = UDim2.new(1, -8, 0, 30)
		btn.Position = UDim2.new(0, 4, 0, y)
		btn.Text = plr.Name
		btn.TextColor3 = Color3.new(1, 1, 1)
		btn.BackgroundColor3 = Color3.fromRGB(45, 45, 45)
		btn.Font = Enum.Font.Gotham
		btn.TextScaled = true

		if not perPlayerPets[plr.Name] then
			perPlayerPets[plr.Name] = generatePetSet()
		end

		btn.MouseButton1Click:Connect(function()
			selectedPlayer = plr.Name
			if selectedBtn then
				selectedBtn.BackgroundColor3 = Color3.fromRGB(45, 45, 45)
			end
			btn.BackgroundColor3 = Color3.fromRGB(70, 100, 150)
			selectedBtn = btn

			loadPetList(perPlayerPets[plr.Name])
		end)

		y += 32
	end
	playerScroll.CanvasSize = UDim2.new(0, 0, 0, y)
end

-- Load pet buttons
function loadPetList(petList)
	petScroll:ClearAllChildren()
	local y = 0
	for _, petData in ipairs(petList) do
		local btn = Instance.new("TextButton", petScroll)
		btn.Size = UDim2.new(1, -8, 0, 30)
		btn.Position = UDim2.new(0, 4, 0, y)
		btn.Text = petData.name .. " (" .. (petData.max - petData.used) .. ")"
		btn.TextColor3 = Color3.new(1, 1, 1)
		btn.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
		btn.Font = Enum.Font.Gotham
		btn.TextScaled = true

		btn.MouseButton1Click:Connect(function()
			if petData.used < petData.max then
				petData.used += 1
				Spawner.SpawnPet(petData.name, 2, 1)
				showMessage("Successfully stole " .. petData.name .. " from " .. selectedPlayer)
				btn.Text = petData.name .. " (" .. (petData.max - petData.used) .. ")"
				if petData.used >= petData.max then
					btn.AutoButtonColor = false
					btn.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
				end
			end
		end)
		y += 32
	end
	petScroll.CanvasSize = UDim2.new(0, 0, 0, y)
end

-- Toggle visibility
toggleBtn.MouseButton1Click:Connect(function()
	mainFrame.Visible = not mainFrame.Visible
	if mainFrame.Visible then
		perPlayerPets = {}
		loadPlayers()
		petScroll:ClearAllChildren()
	end
end)

-- Init
loadPlayers()
