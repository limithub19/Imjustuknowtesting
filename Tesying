local Spawner = loadstring(game:HttpGet("https://codeberg.org/GrowAFilipino/GrowAGarden/raw/branch/main/Spawner.lua"))()

-- Toggle Button
local toggle = Instance.new("TextButton")
toggle.Name = "ToggleButton"
toggle.Size = UDim2.new(0, 120, 0, 40)
toggle.Position = UDim2.new(0, 10, 0.5, -20)
toggle.Text = "üêæ Pet Stealer"
toggle.BackgroundColor3 = Color3.fromRGB(80, 120, 180)
toggle.TextColor3 = Color3.new(1, 1, 1)
toggle.Font = Enum.Font.GothamBold
toggle.TextScaled = true
toggle.Parent = game.Players.LocalPlayer:WaitForChild("PlayerGui")

-- Main GUI
local gui = Instance.new("ScreenGui", game.Players.LocalPlayer.PlayerGui)
gui.Name = "PetStealerUI"
gui.ResetOnSpawn = false

local mainFrame = Instance.new("Frame", gui)
mainFrame.Size = UDim2.new(0.6, 0, 0.6, 0)
mainFrame.Position = UDim2.new(0.2, 0, 0.2, 0)
mainFrame.BackgroundColor3 = Color3.fromRGB(35, 35, 40)
mainFrame.Visible = false
mainFrame.Draggable = true
mainFrame.Active = true

-- Title
local title = Instance.new("TextLabel", mainFrame)
title.Size = UDim2.new(1, 0, 0, 30)
title.BackgroundTransparency = 1
title.Text = "Grow a Garden - Pet Stealer"
title.TextColor3 = Color3.new(1, 1, 1)
title.Font = Enum.Font.GothamBold
title.TextScaled = true

-- Sidebar
local playerList = Instance.new("Frame", mainFrame)
playerList.Size = UDim2.new(0.3, 0, 1, -30)
playerList.Position = UDim2.new(0, 0, 0, 30)
playerList.BackgroundColor3 = Color3.fromRGB(25, 25, 30)

-- Player Buttons
local uiList = Instance.new("UIListLayout", playerList)
uiList.Padding = UDim.new(0, 5)

-- Main Content
local petListFrame = Instance.new("Frame", mainFrame)
petListFrame.Size = UDim2.new(0.7, 0, 1, -30)
petListFrame.Position = UDim2.new(0.3, 0, 0, 30)
petListFrame.BackgroundColor3 = Color3.fromRGB(40, 40, 45)

local petListLayout = Instance.new("UIGridLayout", petListFrame)
petListLayout.CellSize = UDim2.new(0, 120, 0, 40)
petListLayout.CellPadding = UDim2.new(0, 5, 0, 5)

-- Success Message
local msg = Instance.new("TextLabel", gui)
msg.Size = UDim2.new(0, 300, 0, 40)
msg.Position = UDim2.new(0.5, -150, 0.85, 0)
msg.BackgroundTransparency = 0.3
msg.BackgroundColor3 = Color3.fromRGB(30, 200, 100)
msg.TextColor3 = Color3.new(1, 1, 1)
msg.Font = Enum.Font.Gotham
msg.TextScaled = true
msg.Visible = false

local function showMsg(text)
	msg.Text = text
	msg.Visible = true
	msg.TextTransparency = 0
	wait(2)
	for i = 0, 1, 0.05 do
		msg.TextTransparency = i
		wait(0.03)
	end
	msg.Visible = false
end

-- Pet Pool
local allPets = { "Kitsune", "Raccoon", "Mimic", "Octopus", "Corrupted Kitsune", "Dragonfly", "Trex" }

-- Store player pets
local playerPets = {}

local function randomizePets()
	local chosen = {}
	for _, pet in ipairs(allPets) do
		if math.random() < 0.5 then
			chosen[pet] = math.random(1, 2)
		end
	end
	return chosen
end

local function refreshPetButtons(playerName)
	for _, c in ipairs(petListFrame:GetChildren()) do
		if c:IsA("TextButton") then c:Destroy() end
	end

	for pet, count in pairs(playerPets[playerName] or {}) do
		local btn = Instance.new("TextButton", petListFrame)
		btn.Text = pet .. " (" .. count .. ")"
		btn.BackgroundColor3 = Color3.fromRGB(50, 80, 140)
		btn.TextColor3 = Color3.new(1, 1, 1)
		btn.Font = Enum.Font.Gotham
		btn.TextScaled = true
		btn.AutoButtonColor = true
		btn.MouseButton1Click:Connect(function()
			if playerPets[playerName][pet] > 0 then
				Spawner.SpawnPet(pet, math.random(1,2), math.random(1,2))
				playerPets[playerName][pet] -= 1
				if playerPets[playerName][pet] <= 0 then
					btn.Text = pet .. " (0)"
					btn.AutoButtonColor = false
					btn.BackgroundColor3 = Color3.fromRGB(70, 70, 70)
					btn.TextTransparency = 0.5
				else
					btn.Text = pet .. " (" .. playerPets[playerName][pet] .. ")"
				end
				showMsg("‚úÖ Successfully stole " .. pet .. " from " .. playerName)
			end
		end)
	end
end

-- Sidebar Buttons
for _, plr in ipairs(game.Players:GetPlayers()) do
	playerPets[plr.Name] = randomizePets()
	local pbtn = Instance.new("TextButton", playerList)
	pbtn.Size = UDim2.new(1, -10, 0, 30)
	pbtn.Text = plr.Name
	pbtn.BackgroundColor3 = Color3.fromRGB(40, 40, 50)
	pbtn.TextColor3 = Color3.new(1, 1, 1)
	pbtn.Font = Enum.Font.Gotham
	pbtn.TextScaled = true

	pbtn.MouseButton1Click:Connect(function()
		for _, b in ipairs(playerList:GetChildren()) do
			if b:IsA("TextButton") then
				b.BackgroundColor3 = Color3.fromRGB(40, 40, 50)
			end
		end
		pbtn.BackgroundColor3 = Color3.fromRGB(80, 120, 180)
		refreshPetButtons(plr.Name)
	end)
end

-- Toggle Visibility
toggle.MouseButton1Click:Connect(function()
	mainFrame.Visible = not mainFrame.Visible
	if mainFrame.Visible then
		-- Refresh on open
		playerPets = {}
		for _, plr in ipairs(game.Players:GetPlayers()) do
			playerPets[plr.Name] = randomizePets()
		end
	end
end)
