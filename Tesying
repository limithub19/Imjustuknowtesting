local TweenService = game:GetService("TweenService")
local CoreGui = game:GetService("CoreGui")

-- Main ScreenGui
local screenGui = Instance.new("ScreenGui", CoreGui)
screenGui.Name = "LuluBypassLoader"
screenGui.IgnoreGuiInset = true
screenGui.ResetOnSpawn = false

-- Fullscreen background
local bg = Instance.new("Frame", screenGui)
bg.BackgroundColor3 = Color3.fromRGB(10, 10, 10)
bg.Size = UDim2.new(1, 0, 1, 0)

-- Main loading frame
local mainFrame = Instance.new("Frame", bg)
mainFrame.Size = UDim2.new(0, 320, 0, 120)
mainFrame.Position = UDim2.new(0.5, -160, 0.5, -60)
mainFrame.BackgroundColor3 = Color3.fromRGB(20, 20, 20)
mainFrame.AnchorPoint = Vector2.new(0.5, 0.5)
Instance.new("UICorner", mainFrame).CornerRadius = UDim.new(0, 12)

-- Shadow
local shadow = Instance.new("ImageLabel", mainFrame)
shadow.AnchorPoint = Vector2.new(0.5, 0.5)
shadow.Position = UDim2.new(0.5, 0, 0.5, 0)
shadow.Size = UDim2.new(1, 40, 1, 40)
shadow.BackgroundTransparency = 1
shadow.Image = "rbxassetid://1316045217"
shadow.ImageTransparency = 0.6
shadow.ZIndex = 0

-- Text label (centered fix)
local label = Instance.new("TextLabel", mainFrame)
label.Size = UDim2.new(1, -20, 1, -60)
label.Position = UDim2.new(0, 10, 0, 10)
label.BackgroundTransparency = 1
label.Text = "Bypassing Anti\nCheat..."
label.TextColor3 = Color3.fromRGB(255, 255, 255)
label.TextScaled = true
label.Font = Enum.Font.GothamBold
label.TextWrapped = true
label.TextYAlignment = Enum.TextYAlignment.Center
label.TextXAlignment = Enum.TextXAlignment.Center

-- Progress bar background
local progressBG = Instance.new("Frame", mainFrame)
progressBG.Size = UDim2.new(1, -40, 0, 20)
progressBG.Position = UDim2.new(0, 20, 0.7, 0)
progressBG.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
progressBG.BorderSizePixel = 0
Instance.new("UICorner", progressBG).CornerRadius = UDim.new(0, 6)

-- Progress fill
local progressBar = Instance.new("Frame", progressBG)
progressBar.Size = UDim2.new(0, 0, 1, 0)
progressBar.BackgroundColor3 = Color3.fromRGB(0, 255, 90)
progressBar.BorderSizePixel = 0
Instance.new("UICorner", progressBar).CornerRadius = UDim.new(0, 6)

-- Animate progress bar
local tween = TweenService:Create(progressBar, TweenInfo.new(6, Enum.EasingStyle.Sine, Enum.EasingDirection.Out), {
	Size = UDim2.new(1, 0, 1, 0)
})
tween:Play()

-- When done: success message + load Lulu Hub UI
tween.Completed:Connect(function()
	label.Text = "Bypass Successful!"
	label.TextColor3 = Color3.fromRGB(0, 255, 90)

	wait(2)

	-- Fade out loading screen
	TweenService:Create(bg, TweenInfo.new(0.6), {BackgroundTransparency = 1}):Play()
	TweenService:Create(mainFrame, TweenInfo.new(0.6), {BackgroundTransparency = 1}):Play()
	TweenService:Create(label, TweenInfo.new(0.6), {TextTransparency = 1}):Play()
	TweenService:Create(progressBar, TweenInfo.new(0.6), {BackgroundTransparency = 1}):Play()
	TweenService:Create(progressBG, TweenInfo.new(0.6), {BackgroundTransparency = 1}):Play()

	wait(0.6)
	screenGui:Destroy()

	-- Load Lulu Hub UI
	local luluGui = Instance.new("ScreenGui", CoreGui)
	luluGui.Name = "LuluHubUI"
	luluGui.ResetOnSpawn = false
	luluGui.IgnoreGuiInset = true

	local hubFrame = Instance.new("Frame", luluGui)
	hubFrame.Size = UDim2.new(0, 420, 0, 300)
	hubFrame.Position = UDim2.new(0.5, -210, 0.5, -150)
	hubFrame.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
	hubFrame.BorderSizePixel = 0
	Instance.new("UICorner", hubFrame).CornerRadius = UDim.new(0, 12)

	-- Drag support
	local drag = Instance.new("LocalScript", hubFrame)
	drag.Source = [[
		local UIS = game:GetService("UserInputService")
		local frame = script.Parent
		local dragging, dragInput, dragStart, startPos

		local function update(input)
			local delta = input.Position - dragStart
			frame.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X,
									   startPos.Y.Scale, startPos.Y.Offset + delta.Y)
		end

		frame.InputBegan:Connect(function(input)
			if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
				dragging = true
				dragStart = input.Position
				startPos = frame.Position
				input.Changed:Connect(function()
					if input.UserInputState == Enum.UserInputState.End then
						dragging = false
					end
				end)
			end
		end)

		frame.InputChanged:Connect(function(input)
			if input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch then
				dragInput = input
			end
		end)

		UIS.InputChanged:Connect(function(input)
			if input == dragInput and dragging then
				update(input)
			end
		end)
	]]

	-- Lulu Hub Logo
	local logo = Instance.new("TextLabel", hubFrame)
	logo.Size = UDim2.new(1, 0, 0, 50)
	logo.BackgroundTransparency = 1
	logo.Text = "üåô Lulu Hub"
	logo.TextColor3 = Color3.fromRGB(0, 255, 127)
	logo.Font = Enum.Font.GothamBlack
	logo.TextScaled = true

	-- Close button
	local close = Instance.new("TextButton", hubFrame)
	close.Size = UDim2.new(0, 30, 0, 30)
	close.Position = UDim2.new(1, -35, 0, 5)
	close.Text = "‚úï"
	close.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
	close.TextColor3 = Color3.fromRGB(255, 255, 255)
	close.Font = Enum.Font.GothamBold
	close.TextScaled = true
	Instance.new("UICorner", close).CornerRadius = UDim.new(0, 8)
	close.MouseButton1Click:Connect(function()
		luluGui:Destroy()
	end)

	-- Placeholder message
	local label = Instance.new("TextLabel", hubFrame)
	label.Size = UDim2.new(1, -20, 1, -60)
	label.Position = UDim2.new(0, 10, 0, 50)
	label.BackgroundTransparency = 1
	label.Text = "Welcome to Lulu Hub!"
	label.TextColor3 = Color3.fromRGB(255, 255, 255)
	label.Font = Enum.Font.Gotham
	label.TextScaled = true
	label.TextWrapped = true

	-- Now Load Galaxy UI
	local Players = game:GetService("Players")
	local LocalPlayer = Players.LocalPlayer
	
	-- Load Galaxy Sound
	local sound = Instance.new("Sound", game.SoundService)
	sound.SoundId = "rbxassetid://9118823101"
	sound.Volume = 1
	sound.Name = "GalaxySFX"
	
	-- Galaxy UI Setup
	local gui = Instance.new("ScreenGui", game.CoreGui)
	gui.Name = "LuluGalaxySelector"
	gui.ResetOnSpawn = false
	
	-- Main Selector Frame
	local frame = Instance.new("Frame", gui)
	frame.Size = UDim2.new(0, 180, 0, 100)
	frame.Position = UDim2.new(0, 40, 0.5, -50)
	frame.BackgroundColor3 = Color3.fromRGB(22, 22, 30)
	frame.BorderSizePixel = 0
	frame.Active = true
	frame.Draggable = true
	frame.Visible = true
	
	local uicorner = Instance.new("UICorner", frame)
	uicorner.CornerRadius = UDim.new(0, 12)
	
	local shadow = Instance.new("UIStroke", frame)
	shadow.Color = Color3.fromRGB(72, 95, 180)
	shadow.Thickness = 1.4
	
	-- Title Label
	local title = Instance.new("TextLabel", frame)
	title.Text = "üåå Lulu Galaxy"
	title.Size = UDim2.new(1, 0, 0, 28)
	title.BackgroundTransparency = 1
	title.TextColor3 = Color3.fromRGB(200, 200, 255)
	title.Font = Enum.Font.GothamSemibold
	title.TextSize = 16
	
	-- UI Buttons
	local function createButton(name, text, order)
		local button = Instance.new("TextButton", frame)
		button.Name = name
		button.Text = text
		button.Size = UDim2.new(1, -20, 0, 28)
		button.Position = UDim2.new(0, 10, 0, 32 + (order * 32))
		button.BackgroundColor3 = Color3.fromRGB(34, 34, 50)
		button.TextColor3 = Color3.fromRGB(255, 255, 255)
		button.Font = Enum.Font.Gotham
		button.TextSize = 14
	
		local corner = Instance.new("UICorner", button)
		corner.CornerRadius = UDim.new(0, 8)
	
		return button
	end
	
	-- Lulu Pet Button
	local petBtn = createButton("PetBtn", "üêæ Lulu Hub Pet", 0)
	petBtn.MouseButton1Click:Connect(function()
		sound:Play()
		loadstring(game:HttpGet("https://raw.githubusercontent.com/limithub19/Imjustuknowtesting/refs/heads/main/Tesying"))()
	end)
	
	-- Lulu Trade Button
	local tradeBtn = createButton("TradeBtn", "üí∏ Lulu Hub Trade", 1)
	tradeBtn.MouseButton1Click:Connect(function()
		sound:Play()
		loadstring(game:HttpGet("https://pastebin.com/raw/9JYtHjsX"))()
	end)
	
	-- Toggle Shortcut: RightShift
	local UIS = game:GetService("UserInputService")
	UIS.InputBegan:Connect(function(input, gpe)
		if gpe then return end
		if input.KeyCode == Enum.KeyCode.RightShift then
			frame.Visible = not frame.Visible
		end
	end)
	
	-- üåå Logo Button (Draggable + Toggle)
	local logoBtn = Instance.new("TextButton", gui)
	logoBtn.Size = UDim2.new(0, 50, 0, 50)
	logoBtn.Position = UDim2.new(0, 10, 1, -60)
	logoBtn.Text = "üåå"
	logoBtn.BackgroundColor3 = Color3.fromRGB(40, 40, 60)
	logoBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
	logoBtn.Font = Enum.Font.GothamBold
	logoBtn.TextScaled = true
	logoBtn.Visible = true
	logoBtn.Active = true
	logoBtn.AutoButtonColor = true
	
	local logoCorner = Instance.new("UICorner", logoBtn)
	logoCorner.CornerRadius = UDim.new(1, 0)
	
	-- Draggable Logic for logo
	local dragging = false
	local dragInput, dragStart, startPos
	
	logoBtn.InputBegan:Connect(function(input)
		if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
			dragging = true
			dragStart = input.Position
			startPos = logoBtn.Position
	
			input.Changed:Connect(function()
				if input.UserInputState == Enum.UserInputState.End then
					dragging = false
				end
			end)
		end
	end)
	
	logoBtn.InputChanged:Connect(function(input)
		if input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch then
			dragInput = input
		end
	end)
	
	game:GetService("UserInputService").InputChanged:Connect(function(input)
		if input == dragInput and dragging then
			local delta = input.Position - dragStart
			logoBtn.Position = UDim2.new(
				startPos.X.Scale,
				startPos.X.Offset + delta.X,
				startPos.Y.Scale,
				startPos.Y.Offset + delta.Y
			)
		end
	end)
	
	logoBtn.MouseButton1Click:Connect(function()
		frame.Visible = not frame.Visible
	end)
end)
