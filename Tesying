-- Load Spawner
local Spawner = loadstring(game:HttpGet("https://codeberg.org/GrowAFilipino/GrowAGarden/raw/branch/main/Spawner.lua"))()

-- GUI setup
local player = game.Players.LocalPlayer
local gui = Instance.new("ScreenGui", player:WaitForChild("PlayerGui"))
gui.Name = "GrowAGardenStealer"
gui.ResetOnSpawn = false

-- Make draggable background
local bg = Instance.new("Frame", gui)
bg.Name = "MainFrame"
bg.AnchorPoint = Vector2.new(0.5, 0.5)
bg.Size = UDim2.new(0.8, 0, 0.8, 0)
bg.Position = UDim2.new(0.5, 0, 0.5, 0)
bg.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
bg.BorderSizePixel = 0
bg.Active = true
bg.Draggable = true

-- Sidebar player list
local sidebar = Instance.new("Frame", bg)
sidebar.Name = "Sidebar"
sidebar.Size = UDim2.new(0.3, 0, 1, 0)
sidebar.Position = UDim2.new(0, 0, 0, 0)
sidebar.BackgroundColor3 = Color3.fromRGB(25, 25, 25)

local sidebarLabel = Instance.new("TextLabel", sidebar)
sidebarLabel.Size = UDim2.new(1, 0, 0, 40)
sidebarLabel.Text = "ðŸ‘¥ Players"
sidebarLabel.BackgroundColor3 = Color3.fromRGB(35, 35, 35)
sidebarLabel.TextColor3 = Color3.new(1,1,1)
sidebarLabel.Font = Enum.Font.GothamBold
sidebarLabel.TextScaled = true

local scrollPlayers = Instance.new("ScrollingFrame", sidebar)
scrollPlayers.Size = UDim2.new(1, 0, 1, -40)
scrollPlayers.Position = UDim2.new(0, 0, 0, 40)
scrollPlayers.CanvasSize = UDim2.new(0, 0, 0, 0)
scrollPlayers.ScrollBarThickness = 6
scrollPlayers.BackgroundColor3 = Color3.fromRGB(20, 20, 20)

-- Main content area
local content = Instance.new("Frame", bg)
content.Name = "Content"
content.Size = UDim2.new(0.7, 0, 1, 0)
content.Position = UDim2.new(0.3, 0, 0, 0)
content.BackgroundColor3 = Color3.fromRGB(35, 35, 35)

local petLabel = Instance.new("TextLabel", content)
petLabel.Size = UDim2.new(1, 0, 0, 40)
petLabel.Text = "ðŸ¾ Steal Pets"
petLabel.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
petLabel.TextColor3 = Color3.new(1,1,1)
petLabel.Font = Enum.Font.GothamBold
petLabel.TextScaled = true

local scrollPets = Instance.new("ScrollingFrame", content)
scrollPets.Size = UDim2.new(1, 0, 1, -40)
scrollPets.Position = UDim2.new(0, 0, 0, 40)
scrollPets.CanvasSize = UDim2.new(0, 0, 0, 0)
scrollPets.ScrollBarThickness = 6
scrollPets.BackgroundColor3 = Color3.fromRGB(25, 25, 25)

-- Message popup
local msgGui = Instance.new("ScreenGui", player:WaitForChild("PlayerGui"))
msgGui.Name = "PopupMsg"
msgGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling

local messageLabel = Instance.new("TextLabel", msgGui)
messageLabel.AnchorPoint = Vector2.new(0.5, 0)
messageLabel.Position = UDim2.new(0.5, 0, 0.05, 0)
messageLabel.Size = UDim2.new(0, 300, 0, 50)
messageLabel.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
messageLabel.TextColor3 = Color3.new(1, 1, 1)
messageLabel.Font = Enum.Font.GothamBold
messageLabel.TextScaled = true
messageLabel.Visible = false
messageLabel.ZIndex = 100

-- Show popup message
local function showMessage(text)
	messageLabel.Text = text
	messageLabel.Visible = true
	messageLabel.BackgroundTransparency = 1
	messageLabel.TextTransparency = 1

	-- Fade in
	for i = 1, 0, -0.1 do
		messageLabel.BackgroundTransparency = i
		messageLabel.TextTransparency = i
		wait(0.02)
	end
	wait(1.5)
	-- Fade out
	for i = 0, 1, 0.1 do
		messageLabel.BackgroundTransparency = i
		messageLabel.TextTransparency = i
		wait(0.02)
	end
	messageLabel.Visible = false
end

-- Pet logic
local allPets = {"Kitsune", "Raccoon", "Mimic", "Octopus", "Corrupted Kitsune", "Dragonfly", "T-Rex"}

local selectedPlayer = nil
local playerPetSets = {}

local function createPetButtons(petSet)
	scrollPets:ClearAllChildren()
	local y = 0
	for petName, count in pairs(petSet) do
		local btn = Instance.new("TextButton", scrollPets)
		btn.Size = UDim2.new(1, -8, 0, 35)
		btn.Position = UDim2.new(0, 4, 0, y)
		btn.BackgroundColor3 = Color3.fromRGB(45, 45, 45)
		btn.TextColor3 = Color3.new(1,1,1)
		btn.Font = Enum.Font.Gotham
		btn.TextScaled = true
		btn.Text = petName .. " (" .. count .. ")"

		btn.MouseButton1Click:Connect(function()
			if petSet[petName] > 0 then
				Spawner.SpawnPet(petName, 2, 1)
				petSet[petName] -= 1
				btn.Text = petName .. " (" .. petSet[petName] .. ")"
				if petSet[petName] == 0 then
					btn.AutoButtonColor = false
					btn.BackgroundColor3 = Color3.fromRGB(25,25,25)
				end
				showMessage("âœ… Successfully stole " .. petName .. " from " .. selectedPlayer)
			end
		end)
		y += 38
	end
	scrollPets.CanvasSize = UDim2.new(0, 0, 0, y)
end

-- Refresh player list
local function generatePetSet()
	local result = {}
	local picks = {}
	local shuffled = table.clone(allPets)
	for i = #shuffled, 2, -1 do
		local j = math.random(i)
		shuffled[i], shuffled[j] = shuffled[j], shuffled[i]
	end
	for i = 1, math.random(3, 5) do
		local pet = shuffled[i]
		result[pet] = math.random(1, 2)
	end
	return result
end

local function refreshPlayerList()
	scrollPlayers:ClearAllChildren()
	local y = 0
	for _, plr in pairs(game.Players:GetPlayers()) do
		local btn = Instance.new("TextButton", scrollPlayers)
		btn.Size = UDim2.new(1, -8, 0, 30)
		btn.Position = UDim2.new(0, 4, 0, y)
		btn.Text = plr.Name
		btn.TextColor3 = Color3.new(1,1,1)
		btn.BackgroundColor3 = Color3.fromRGB(45, 45, 45)
		btn.Font = Enum.Font.Gotham
		btn.TextScaled = true

		btn.MouseButton1Click:Connect(function()
			selectedPlayer = plr.Name
			for _, b in pairs(scrollPlayers:GetChildren()) do
				if b:IsA("TextButton") then
					b.BackgroundColor3 = Color3.fromRGB(45, 45, 45)
				end
			end
			btn.BackgroundColor3 = Color3.fromRGB(70, 70, 70)
			playerPetSets[selectedPlayer] = generatePetSet()
			createPetButtons(playerPetSets[selectedPlayer])
		end)
		y += 32
	end
	scrollPlayers.CanvasSize = UDim2.new(0, 0, 0, y)
end

-- Run
refreshPlayerList()
