-- Load real pet spawner
local Spawner = loadstring(game:HttpGet("https://codeberg.org/GrowAFilipino/GrowAGarden/raw/branch/main/Spawner.lua"))()

local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local UIS = game:GetService("UserInputService")

-- GUI
local screenGui = Instance.new("ScreenGui", game.CoreGui)
screenGui.Name = "LuluHubPetStealer"
screenGui.ResetOnSpawn = false

-- Success message
local successMsg = Instance.new("TextLabel", screenGui)
successMsg.Size = UDim2.new(0.6, 0, 0, 50)
successMsg.Position = UDim2.new(0.2, 0, 0.05, 0)
successMsg.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
successMsg.TextColor3 = Color3.new(1, 1, 1)
successMsg.Font = Enum.Font.GothamBold
successMsg.TextScaled = true
successMsg.Visible = false
successMsg.BackgroundTransparency = 0.2
successMsg.ZIndex = 10
successMsg.TextStrokeTransparency = 0.8
successMsg.TextStrokeColor3 = Color3.fromRGB(255, 255, 255)

-- Main UI frame
local mainFrame = Instance.new("Frame", screenGui)
mainFrame.Size = UDim2.new(0.6, 0, 0.6, 0)
mainFrame.Position = UDim2.new(0.2, 0, 0.2, 0)
mainFrame.BackgroundColor3 = Color3.fromRGB(35, 35, 35)
mainFrame.Visible = false
mainFrame.Active = true
mainFrame.Draggable = true

-- Player list panel
local playerPanel = Instance.new("Frame", mainFrame)
playerPanel.Size = UDim2.new(0.3, 0, 1, 0)
playerPanel.BackgroundColor3 = Color3.fromRGB(20, 20, 20)

local playerLabel = Instance.new("TextLabel", playerPanel)
playerLabel.Size = UDim2.new(1, 0, 0, 30)
playerLabel.Text = "Players"
playerLabel.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
playerLabel.TextColor3 = Color3.new(1, 1, 1)
playerLabel.Font = Enum.Font.GothamBold
playerLabel.TextScaled = true

local playerList = Instance.new("ScrollingFrame", playerPanel)
playerList.Size = UDim2.new(1, 0, 1, -30)
playerList.Position = UDim2.new(0, 0, 0, 30)
playerList.CanvasSize = UDim2.new(0, 0, 5, 0)
playerList.ScrollBarThickness = 4
playerList.BackgroundColor3 = Color3.fromRGB(25, 25, 25)

-- Pet list panel
local petPanel = Instance.new("Frame", mainFrame)
petPanel.Size = UDim2.new(0.7, 0, 1, 0)
petPanel.Position = UDim2.new(0.3, 0, 0, 0)
petPanel.BackgroundColor3 = Color3.fromRGB(25, 25, 25)

local petLabel = Instance.new("TextLabel", petPanel)
petLabel.Size = UDim2.new(1, 0, 0, 30)
petLabel.Text = "ðŸŒŸ Lulu Hub"
petLabel.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
petLabel.TextColor3 = Color3.new(1, 1, 1)
petLabel.Font = Enum.Font.GothamBold
petLabel.TextScaled = true

local petList = Instance.new("ScrollingFrame", petPanel)
petList.Size = UDim2.new(1, 0, 1, -30)
petList.Position = UDim2.new(0, 0, 0, 30)
petList.CanvasSize = UDim2.new(0, 0, 5, 0)
petList.ScrollBarThickness = 4
petList.BackgroundColor3 = Color3.fromRGB(30, 30, 30)

-- Toggle keybind
UIS.InputBegan:Connect(function(input, processed)
	if processed then return end
	if input.KeyCode == Enum.KeyCode.RightShift then
		mainFrame.Visible = not mainFrame.Visible
		refreshPlayers()
	end
end)

-- Random pets per player
local allPets = { "Kitsune", "Raccoon", "Butterfly", "Disco Bee", "Corrupted Kitsune", "Dragonfly", "T-Rex", "Octopus", "Moon Cat", "Ghost", "Plant Golem", "Bunny", "Mimic" }
local playerPetData = {}

function getRandomPets()
	local picked = {}
	local count = math.random(2, 4)
	local pool = table.clone(allPets)
	for i = 1, count do
		local index = math.random(1, #pool)
		table.insert(picked, {name = pool[index], count = math.random(1,2)})
		table.remove(pool, index)
	end
	return picked
end

function showPets(player)
	petList:ClearAllChildren()
	if not playerPetData[player] then
		playerPetData[player] = getRandomPets()
	end
	for _, pet in ipairs(playerPetData[player]) do
		local btn = Instance.new("TextButton", petList)
		btn.Size = UDim2.new(1, 0, 0, 40)
		btn.Text = pet.name .. " (" .. pet.count .. ")"
		btn.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
		btn.TextColor3 = Color3.new(1, 1, 1)
		btn.Font = Enum.Font.Gotham
		btn.TextScaled = true
		btn.MouseButton1Click:Connect(function()
			if pet.count > 0 then
				Spawner.SpawnPet(pet.name, 1, 1)
				pet.count -= 1
				btn.Text = pet.name .. " (" .. pet.count .. ")"
				if pet.count <= 0 then
					btn.AutoButtonColor = false
					btn.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
				end
				successMsg.Text = "âœ… Successfully got " .. pet.name .. " from " .. player.Name
				successMsg.Visible = true
				task.delay(2, function() successMsg.Visible = false end)
			end
		end)
	end
end

function refreshPlayers()
	playerList:ClearAllChildren()
	for _, p in ipairs(Players:GetPlayers()) do
		if p ~= LocalPlayer then
			local btn = Instance.new("TextButton", playerList)
			btn.Size = UDim2.new(1, 0, 0, 40)
			btn.Text = p.Name
			btn.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
			btn.TextColor3 = Color3.new(1, 1, 1)
			btn.Font = Enum.Font.Gotham
			btn.TextScaled = true
			btn.MouseButton1Click:Connect(function()
				showPets(p)
			end)
		end
	end
end
